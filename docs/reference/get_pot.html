<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>A function to obtain Peaks-Over-Threshold (POT) data using the NRFA API — get_pot • winfapReader</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="A function to obtain Peaks-Over-Threshold (POT) data using the NRFA API — get_pot" />
<meta property="og:description" content="The function queries the NRFA API for the .PT file similar to the WINFAP file for a given stations. It then processes the file in a fashion similar to read_pot." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">winfapReader</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1-2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/winfapReader.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ilapros/winfapReader/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>A function to obtain Peaks-Over-Threshold (POT) data using the NRFA API</h1>
    <small class="dont-index">Source: <a href='https://github.com/ilapros/winfapReader/blob/master/R/get_winfapapi.R'><code>R/get_winfapapi.R</code></a></small>
    <div class="hidden name"><code>get_pot.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function queries the NRFA API for the .PT file similar to the WINFAP file for a given stations. It then processes the file in a fashion similar to <code><a href='read_pot.html'>read_pot</a></code>.</p>
    </div>

    <pre class="usage"><span class='fu'>get_pot</span><span class='op'>(</span><span class='va'>station</span>, getAmax <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>station</th>
      <td><p>the NRFA station number for which peaks over threshold information should be obtained. It can also be a vector of station numbers</p></td>
    </tr>
    <tr>
      <th>getAmax</th>
      <td><p>logical. If <code>TRUE</code> information on the annual maxima values will be retrieved and attached to the <code>WaterYearInfo</code> table</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Like <code><a href='read_pot.html'>read_pot</a></code> a list of three objects <code>tablePOT</code>, <code>WaterYearInfo</code> and <code>dateRange</code>.</p>
<p><code>tablePOT</code> contains a table with all the peaks above the threshold present in the record</p>
<p><code>WaterYearInfo</code> a table containing the information on the percentage of missing values
in any water year for which some data is available in the POT record. This is useful to assess
whether the lack of exceedances is genuine or the result of missing data and to assess whether the threshold
exceedances present in <code>tablePOT</code> can be deemed to be representative of the whole year</p>
<p><code>dateRange</code> a vector with the first and last date of recording for the POT record as provided in the [POT Details] field.
Note that this period might be different than the period for which annual maxima records are available</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='read_pot.html'>read_pot</a></code>. Information on the peaks over threshold records and river flow gauging in the UK can be found at the National River Flow Archive website <a href='https://nrfa.ceh.ac.uk'>https://nrfa.ceh.ac.uk</a></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
  <span class='co'>### the example take longer than 5 seconds to run</span>
  <span class='va'>p40003</span> <span class='op'>&lt;-</span> <span class='fu'>get_pot</span><span class='op'>(</span><span class='fl'>40003</span><span class='op'>)</span> <span class='co'># the Medway at Teston / East Farleigh</span>
  <span class='va'>p40003</span><span class='op'>$</span><span class='va'>tablePOT</span><span class='op'>[</span><span class='va'>p40003</span><span class='op'>$</span><span class='va'>tablePOT</span><span class='op'>$</span><span class='va'>WaterYear</span> <span class='op'>&gt;</span> <span class='fl'>1969</span> <span class='op'>&amp;</span>
        <span class='va'>p40003</span><span class='op'>$</span><span class='va'>tablePOT</span><span class='op'>$</span><span class='va'>WaterYear</span> <span class='op'>&lt;</span> <span class='fl'>1977</span>,<span class='op'>]</span>
</div><div class='output co'>#&gt;    Station       Date WaterYear    Flow Stage
#&gt; 30   40003 1971-01-24      1970 125.000  0.00
#&gt; 31   40003 1973-01-29      1972 150.153  7.04
#&gt; 32   40003 1974-02-12      1973 234.527  8.36
#&gt; 33   40003 1974-02-15      1973 148.985  7.02
#&gt; 34   40003 1974-11-14      1974 147.821  7.00
#&gt; 35   40003 1974-11-23      1974 229.496  8.30
#&gt; 36   40003 1975-01-21      1974 177.825  7.50
#&gt; 37   40003 1975-01-27      1974 143.768  6.93
#&gt; 38   40003 1975-05-17      1974 150.738  7.05
#&gt; 39   40003 1976-12-01      1976 151.323  7.06
#&gt; 40   40003 1977-01-15      1976 160.199  7.21</div><div class='input'>  <span class='co'>### no events in 1971 nor 1975</span>
  <span class='va'>p40003</span><span class='op'>$</span><span class='va'>WaterYearInfo</span><span class='op'>[</span><span class='va'>p40003</span><span class='op'>$</span><span class='va'>WaterYearInfo</span><span class='op'>$</span><span class='va'>WaterYear</span> <span class='op'>&gt;</span> <span class='fl'>1969</span> <span class='op'>&amp;</span>
        <span class='va'>p40003</span><span class='op'>$</span><span class='va'>WaterYearInfo</span><span class='op'>$</span><span class='va'>WaterYear</span> <span class='op'>&lt;</span> <span class='fl'>1977</span>,<span class='op'>]</span>
</div><div class='output co'>#&gt;    WaterYear potPercComplete potThreshold
#&gt; 15      1970      100.000000      122.571
#&gt; 16      1971      100.000000      122.571
#&gt; 17      1972      100.000000      122.571
#&gt; 18      1973       37.534247      122.571
#&gt; 19      1974       29.041096      122.571
#&gt; 20      1975        2.185792      122.571
#&gt; 21      1976       26.575342      122.571</div><div class='input'>  <span class='co'># in 1971 all records are valid,</span>
  <span class='co'># in 1975 no exceedances</span>
  <span class='co'># might be due to the fact that almost no valid record are available</span>

  <span class='va'>p40003</span> <span class='op'>&lt;-</span> <span class='fu'>get_pot</span><span class='op'>(</span><span class='fl'>40003</span>, getAmax <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
  <span class='va'>p40003</span><span class='op'>$</span><span class='va'>WaterYearInfo</span><span class='op'>[</span><span class='va'>p40003</span><span class='op'>$</span><span class='va'>WaterYearInfo</span><span class='op'>$</span><span class='va'>WaterYear</span> <span class='op'>&gt;</span> <span class='fl'>1969</span> <span class='op'>&amp;</span>
       <span class='va'>p40003</span><span class='op'>$</span><span class='va'>WaterYearInfo</span><span class='op'>$</span><span class='va'>WaterYear</span> <span class='op'>&lt;</span> <span class='fl'>1977</span>,<span class='op'>]</span>
</div><div class='output co'>#&gt;    Station WaterYear   amaxDate amaxFlow amaxStage amaxRejected potPercComplete
#&gt; 15   40003      1970 1971-01-24  125.000      0.00        FALSE      100.000000
#&gt; 16   40003      1971 1972-01-11   71.120      2.80        FALSE      100.000000
#&gt; 17   40003      1972 1973-01-29  150.153      7.04        FALSE      100.000000
#&gt; 18   40003      1973 1974-02-12  234.527      8.36        FALSE       37.534247
#&gt; 19   40003      1974 1974-11-23  229.496      8.30        FALSE       29.041096
#&gt; 20   40003      1975 1975-12-02  114.864      6.41        FALSE        2.185792
#&gt; 21   40003      1976 1977-01-15  160.199      7.21        FALSE       26.575342
#&gt;    potThreshold
#&gt; 15      122.571
#&gt; 16      122.571
#&gt; 17      122.571
#&gt; 18      122.571
#&gt; 19      122.571
#&gt; 20      122.571
#&gt; 21      122.571</div><div class='input'>  <span class='co'># the annual maximum in 1971 and 1975 was below the threshold</span>
  <span class='co'># no events exceeded the threshold</span>
<span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Ilaria Prosdocimi, Luke Shaw.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


